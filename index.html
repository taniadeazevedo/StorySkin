<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STORYSKIN | Tu Próxima Obsesión</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4853214655991551" crossorigin="anonymous"></script>
    <style>
        :root { --accent: #8b5cf6; --bg: #050505; --glass: rgba(255,255,255,0.02); --border: rgba(255,255,255,0.1); }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        body { background: var(--bg); background-image: radial-gradient(circle at 50% 50%, rgba(139, 92, 246, 0.05), transparent); color: #fff; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .container { max-width: 1200px; margin: 0 auto; padding: 4rem 1.5rem; }
        .hero { text-align: center; margin-bottom: 4rem; width: 100%; }
        .hero-title { font-size: clamp(2.2rem, 12vw, 7.5rem); font-weight: 900; letter-spacing: 0.15em; margin-bottom: 1rem; background: linear-gradient(180deg, #fff 0%, #444 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-transform: uppercase; width: 100%; }
        .hero-desc { max-width: 600px; margin: 0 auto; color: #888; font-size: 1rem; line-height: 1.5; padding: 0 1rem; }
        .genre-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 4rem; }
        .card { position: relative; text-align: center; }
        .char-img { width: 100%; height: auto; max-height: 350px; object-fit: contain; margin-bottom: 0.5rem; transition: 0.5s; animation: float 6s ease-in-out infinite; cursor: pointer; }
        .bubble { position: absolute; top: -10px; left: 50%; transform: translateX(-50%) scale(0.9); background: #fff; color: #000; padding: 0.8rem 1.2rem; border-radius: 12px; font-weight: 700; font-size: 0.8rem; width: 220px; opacity: 0; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 50; pointer-events: none; }
        .bubble::after { content: ''; position: absolute; bottom: -8px; left: 50%; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid #fff; transform: translateX(-50%); }
        .card:hover .bubble, .card.active .bubble { opacity: 1; transform: translateX(-50%) scale(1) translateY(-20px); }
        .genre-name { font-size: 0.85rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.3em; color: rgba(255,255,255,0.4); cursor: pointer; padding: 15px; transition: 0.3s; display: inline-block; }
        .genre-name:hover { color: var(--accent); transform: scale(1.1); }
        #scanner-view { display: none; position: fixed; inset: 0; background: #000; z-index: 2000; align-items: center; justify-content: center; flex-direction: column; }
        .scan-line { width: 100%; height: 3px; background: var(--accent); position: absolute; top: 0; left: 0; box-shadow: 0 0 20px var(--accent); animation: scan 2s linear infinite; }
        @keyframes scan { from { top: 0%; } to { top: 100%; } }
        #res-view { display: none; padding-top: 2rem; }
        .res-main { display: flex; flex-direction: column; align-items: center; background: var(--glass); padding: 2rem; border-radius: 24px; text-align: center; gap: 2rem; border: 1px solid var(--border); }
        @media (min-width: 768px) { .res-main { flex-direction: row; text-align: left; padding: 4rem; } }
        .book-img { width: 180px; border-radius: 8px; box-shadow: 0 20px 40px rgba(0,0,0,0.6); transition: 0.5s filter; }
        .blur-load { filter: blur(20px); }
        .amazon-btn { display: inline-block; background: #fff; color: #000; padding: 1.2rem 2rem; border-radius: 12px; font-weight: 800; text-decoration: none; margin-top: 1.5rem; width: 100%; text-align: center; text-transform: uppercase; border: none; cursor: pointer; }
        .amazon-btn:hover { background: var(--accent); color: #fff; }
        #quiz-view { display: none; position: fixed; inset: 0; background: #000; z-index: 1000; align-items: center; justify-content: center; }
        .q-box { max-width: 700px; width: 90%; text-align: center; }
        .q-text { font-size: clamp(1.4rem, 5vw, 2.2rem); font-weight: 900; margin-bottom: 3rem; line-height: 1.3; }
        .ans-btn { padding: 1.5rem; background: var(--glass); border: 1px solid var(--border); color: #fff; border-radius: 18px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: 0.2s; width: 100%; margin-bottom: 1rem; text-align: center; }
        .ans-btn:hover { background: #fff; color: #000; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
    </style>
</head>
<body>
    <div class="container" id="home-view">
        <div class="hero">
            <h1 class="hero-title">STORYSKIN</h1>
            <p class="hero-desc">El primer recomendador de libros que se atreve a preguntarte quién quieres ser hoy. Elige un avatar y sobrevive al cuestionario.</p>
        </div>
        <div id="grid" class="genre-grid"></div>
    </div>
    <div id="quiz-view">
        <div class="q-box">
            <div id="q-text" class="q-text"></div>
            <div id="options"></div>
        </div>
    </div>
    <div id="scanner-view">
        <div class="scan-line"></div>
        <h2 style="letter-spacing: 0.5em; font-weight: 300; color: var(--accent); text-align: center; padding: 2rem;">ANALIZANDO TU ADN LITERARIO...</h2>
    </div>
    <div id="res-view" class="container">
        <div id="res-data" class="res-main"></div>
        <h3 style="margin: 4rem 0 2rem; font-weight: 900; text-align: center; letter-spacing: 0.3em; color: #444; font-size: 0.7rem; text-transform: uppercase;">Otros destinos para ti</h3>
        <div id="res-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 2rem;"></div>
        <center><button onclick="location.reload()" class="ans-btn" style="margin-top: 5rem; max-width: 300px; display: block; background: transparent; border: 1px solid #333; color: #666;">EXPLORAR OTROS GÉNEROS</button></center>
    </div>

    <script>
        const data = {
            fantasy: { name: "Fantasía", img: "https://taniadeazevedo.es/wp-content/uploads/2026/02/1f494qll-removebg-preview.png", bubble: "¿Listo para mancharte de sangre en un mundo que ni siquiera existe?", q: [
                {q:"¿Buscamos una aventura flash de una tarde o estás lista para casarte con una saga de 10 tomos?", a:"Dame un lío rápido y sin compromiso", b:"Ponme el anillo, quiero vivir ahí años"},
                {q:"¿Magia de purpurina o rituales oscuros que requieren sacrificios humanos?", a:"Prefiero polvos de hada", b:"Si no hay sangre, no es magia"},
                {q:"¿Dragones clásicos o criaturas tan bizarras que te harán dudar de tu cordura?", a:"Lo de siempre me vale", b:"Dame algo raro que me perturbe"},
                {q:"¿Castillos medievales o una ciudad moderna donde los orcos usan Instagram?", a:"Caballeros y castillos", b:"Orcos con wifi y café"},
                {q:"¿Finales felices o tragedias crueles donde mueren hasta los extras?", a:"Luz, esperanza y amor", b:"Que no quede vivo ni el apuntador"}
            ]},
            thriller: { name: "Thriller", img: "https://taniadeazevedo.es/wp-content/uploads/2026/02/d7nt4mr2-removebg-preview.png", bubble: "¿Crees que eres más lista que el asesino? Ten cuidado, suelo ganar yo.", q: [
                {q:"¿Asesinato elegante con té o una escena macabra que requiere mucha fregona?", a:"Té estilo Agatha Christie", b:"Dame sangre y forenses sudando"},
                {q:"¿Ritmo pausado o una persecución a 200km/h por toda la ciudad?", a:"Mente fría y lupa en mano", b:"Adrenalina pura, sin frenos"},
                {q:"¿Ir con el detective bueno o meterte en la mente del psicópata?", a:"Justicia y ley ante todo", b:"Quiero saber por qué mata"},
                {q:"¿Realismo forense o una conspiración global de los Illuminati?", a:"ADN y hechos reales", b:"Teorías locas y caos mundial"},
                {q:"¿Justicia poética o los malos se escapan con el botín?", a:"El bien debe ganar", b:"A veces el mal es más listo"}
            ]},
            erotica: { name: "Erótica", img: "https://taniadeazevedo.es/wp-content/uploads/2026/02/ehznlag1-removebg-preview.png", bubble: "¿Sabías que soy el placer culpable que mantiene viva a la industria?", q: [
                {q:"¿Tensión sexual lenta o incendio total inmediato?", a:"Un roce sutil que quema", b:"Fuego desde el capítulo uno"},
                {q:"¿Enemigos mortales o compartir una cama por fuerza mayor?", a:"Del odio al amor hay un paso", b:"Ups... solo queda una cama"},
                {q:"¿Amor verdadero o deseo físico puro sin preguntas?", a:"Corazón y sentimientos", b:"Piel con piel, sin nombres"},
                {q:"¿Un romance 'cuqui' o algo oscuro, prohibido y peligroso?", a:"Dulce y romántico", b:"Oscuro y pecaminoso"},
                {q:"¿Millonario excéntrico o el chico de al lado que te arregla el grifo?", a:"Dame lujo y excentricidad", b:"Prefiero lo cercano y real"}
            ]},
            horror: { name: "Terror", img: "https://taniadeazevedo.es/wp-content/uploads/2026/02/ztyecjla-removebg-preview.png", bubble: "¿Te atreves a mirar debajo de la cama? Venga, yo estoy ahí esperando.", q: [
                {q:"¿Quieres poder dormir hoy o prefieres que el armario te dé un infarto?", a:"Quiero dormir un poco", b:"Cero sueño, dame pesadillas"},
                {q:"¿Fantasmas que no se ven o humanos locos peores que Satán?", a:"Espíritus del más allá", b:"La gente está fatal de la cabeza"},
                {q:"¿Gore desatado con mucha sangre o terror psicológico sutil?", a:"Vísceras y carnicería", b:"Miedo mental constante"},
                {q:"¿Un susto cada cinco minutos o una tensión lenta que crece?", a:"Jumpscares constantes", b:"Malestar lento y constante"},
                {q:"¿Vas a mirar debajo de la cama esta noche solo por si acaso?", a:"No, paso de rollos", b:"Tengo que comprobarlo"}
            ]},
            scifi: { name: "Sci-Fi", img: "https://taniadeazevedo.es/wp-content/uploads/2026/02/pngtree-d-render-of-a-female-game-character-set-in-cyberpunk-universe-png-image_16355028-removebg-preview.png", bubble: "Hackea tu propio destino. La realidad está sobrevalorada.", q: [
                {q:"¿Estamos solos o somos simplemente el chiste de la galaxia?", a:"Nadie nos oye fuera", b:"Contacto inminente alien"},
                {q:"¿Naves espaciales brillantes o una ciudad cyberpunk con lluvia?", a:"Exploración espacial", b:"Implantes y neón"},
                {q:"¿Un futuro brillante o una distopía donde el aire es de pago?", a:"Utopía limpia", b:"El futuro es una mierda"},
                {q:"¿Viajar al pasado para liarla o saltar dentro de 5000 años?", a:"Arreglar mis errores", b:"Ver el fin de todo"},
                {q:"¿Chip en el cerebro o naturaleza evolucionada?", a:"Más metal, por favor", b:"Bio-evolución pura"}
            ]},
            comingofage: { name: "Coming of Age", img: "https://taniadeazevedo.es/wp-content/uploads/2026/02/pa646132-removebg-preview.png", bubble: "Recuerda cuando todo dolía demasiado y todo era posible.", q: [
                {q:"¿Dramas en el instituto o crisis en la universidad?", a:"Taquillas y primer amor", b:"¿Qué hago con mi vida?"},
                {q:"¿Un primer amor con mariposas o un desengaño crudo?", a:"Dame ese primer beso", b:"Rómpeme el corazón"},
                {q:"¿Intentar encajar o ser el bicho raro con orgullo?", a:"Quiero ser normal", b:"Soy un bicho raro"},
                {q:"¿Aceptar la madurez o ser una Peter Pan eterna?", a:"Me hago adulta", b:"Crecer es una trampa"},
                {q:"¿Final con esperanza o una despedida melancólica?", a:"Todo saldrá bien", b:"Fue bonito mientras duró"}
            ]},
            contemporary: { name: "Contemporáneo", img: "https://taniadeazevedo.es/wp-content/uploads/2026/02/9e7625v9-removebg-preview.png", bubble: "Tu vida no es una película, pero podría ser este libro.", q: [
                {q:"¿Un lunes cualquiera o una historia de superación épica?", a:"Realismo cotidiano", b:"Ver a alguien triunfar"},
                {q:"¿Humor ácido y sarcasmo o reflexión profunda?", a:"Risas para no llorar", b:"Cerebro y alma"},
                {q:"¿Ritmo del asfalto o calma de un retiro en el campo?", a:"Ciudad que no duerme", b:"Aire puro y paz"},
                {q:"¿Realismo sucio sin filtros o historias 'feel-good'?", a:"Dime la verdad pura", b:"Abrazo literario"},
                {q:"¿Un final abierto o todo bien atado y resuelto?", a:"Tú decides el final", b:"Dame respuestas"}
            ]},
            historical: { name: "Histórica", img: "https://taniadeazevedo.es/wp-content/uploads/2026/02/lkl3ol1e-removebg-preview.png", bubble: "El ayer es un país muy extraño. ¿Te vienes de visita?", q: [
                {q:"¿Té en salones o brutalidad en las trincheras?", a:"Elegancia victoriana", b:"Barro y cañones"},
                {q:"¿Clase de historia real o aventura de espada?", a:"Quiero el dato real", b:"Acción y romance"},
                {q:"¿Lujo extremo de la corte o dureza del Oeste?", a:"Pelucas y seda", b:"Polvo y revólver"},
                {q:"¿Un secreto del pasado o el día a día cotidiano?", a:"Misterios enterrados", b:"Vida normal antigua"},
                {q:"¿Pasado puro o una conexión con el presente?", a:"Ayer fue ayer", b:"La historia se repite"}
            ]}
        };

        let currentGenre = null, currentQ = 0;
        function init() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            for (const [key, val] of Object.entries(data)) {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="bubble">${val.bubble}</div>
                    <img src="${val.img}" class="char-img" onclick="toggleBubble(this)">
                    <div class="genre-name" onclick="start('${key}')">${val.name}</div>
                `;
                grid.appendChild(card);
            }
        }
        function toggleBubble(img) {
            const card = img.parentElement;
            document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
            card.classList.add('active');
        }
        function start(key) {
            currentGenre = key; currentQ = 0;
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('quiz-view').style.display = 'flex';
            renderQ();
        }
        function renderQ() {
            const q = data[currentGenre].q[currentQ];
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('options').innerHTML = `
                <button class="ans-btn" onclick="next()">${q.a}</button>
                <button class="ans-btn" onclick="next()">${q.b}</button>
            `;
        }
        function next() {
            currentQ++;
            if (currentQ < data[currentGenre].q.length) renderQ(); else showScanner();
        }
        function showScanner() {
            document.getElementById('quiz-view').style.display = 'none';
            document.getElementById('scanner-view').style.display = 'flex';
            setTimeout(showResult, 2500);
        }
        function generateAmazonLink(title, author) {
            const affiliateTag = 'storyskin-21';
            const query = encodeURIComponent(`${title} ${author}`);
            return `https://www.amazon.es/s?k=${query}&tag=${affiliateTag}`;
        }
        async function showResult() {
            document.getElementById('scanner-view').style.display = 'none';
            document.getElementById('res-view').style.display = 'block';
            try {
                const res = await fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${currentGenre}&maxResults=5&langRestrict=es`);
                const books = await res.json();
                if(books.items) {
                    const main = books.items[0].volumeInfo;
                    const mainLink = generateAmazonLink(main.title, main.authors ? main.authors[0] : '');
                    document.getElementById('res-data').innerHTML = `
                        <div style="flex:1; text-align:center"><img src="${data[currentGenre].img}" style="width:280px; filter: drop-shadow(0 0 30px var(--accent))"></div>
                        <div style="flex:1.5">
                            <h2 style="font-size:2.5rem; font-weight:900; margin-bottom:1rem; text-transform: uppercase;">${main.title}</h2>
                            <p style="color:var(--accent); font-weight:700; font-size:0.9rem;">${main.authors?.join(', ')}</p>
                            <img src="${main.imageLinks?.thumbnail || ''}" class="book-img blur-load" onload="this.classList.remove('blur-load')" style="margin:2rem 0;">
                            <p style="line-height:1.7; color:#888; font-size:1rem">${main.description ? main.description.substring(0,350) + '...' : 'Un viaje literario sin igual.'}</p>
                            <a href="${mainLink}" target="_blank" class="amazon-btn">RECLAMAR ESTE LIBRO</a>
                        </div>`;
                    const grid = document.getElementById('res-grid');
                    grid.innerHTML = '';
                    books.items.slice(1).forEach(b => {
                        const info = b.volumeInfo;
                        const subLink = generateAmazonLink(info.title, info.authors ? info.authors[0] : '');
                        grid.appendChild(Object.assign(document.createElement('div'), {
                            className: 'card', style: 'background:var(--glass); padding:2rem; border-radius:24px; border:1px solid var(--border)',
                            innerHTML: `<img src="${info.imageLinks?.thumbnail || ''}" class="blur-load" onload="this.classList.remove('blur-load')" style="width:110px; border-radius:6px; margin-bottom:1rem">
                                        <h4 style="font-size:0.8rem; margin-bottom:1rem; font-weight:700; text-transform:uppercase;">${info.title}</h4>
                                        <a href="${subLink}" target="_blank" class="amazon-btn" style="font-size:0.7rem; padding:0.8rem">VER EN AMAZON</a>`
                        }));
                    });
                }
            } catch (e) {
                document.getElementById('res-data').innerHTML = "<p>Error de conexión. Reintenta.</p>";
            }
        }
        init();
    </script>
</body>
</html>
